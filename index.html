<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>OtterCare â€” Gioco di cura della lontra</title>
  <meta name="description" content="Prenditi cura della tua adorabile lontra virtuale! Un gioco web rilassante ispirato a Pou ma piÃ¹ tenero. Nutrila, gioca, puliscila e guardala crescere felice." />
  <meta name="keywords" content="lontra, gioco, pet virtuale, tamagotchi, pou, animali, cute, kawaii" />
  <meta name="author" content="OtterCare Team" />
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="OtterCare ğŸ¦¦ - Gioco di cura della lontra" />
  <meta property="og:description" content="Un adorabile gioco web per prendersi cura di una lontra virtuale. PiÃ¹ tenero di Pou!" />
  <meta property="og:image" content="https://via.placeholder.com/1200x630/66cdaa/ffffff?text=OtterCare+ğŸ¦¦" />
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="OtterCare ğŸ¦¦ - Gioco di cura della lontra" />
  <meta name="twitter:description" content="Prenditi cura della tua lontra virtuale!" />
  
  <!-- PWA -->
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#8D6E63">
  
  <!-- Styles -->
  <link rel="stylesheet" href="style.css?v=4">
</head>
<body>
  <header>
    <div class="header-content">
      <h1>OtterCare</h1>
      <div class="coins-display">
        <span class="coin-icon">ğŸª™</span>
        <span id="coins">0</span>
      </div>
    </div>
  </header>

  <main>
    <!-- Game Area (Home) -->
    <section id="homePage" class="page-content active">
      <div class="otter-container">
        <div class="otter-wrapper" id="otterWrapper">
           <!-- New Realistic Otter SVG Inlined -->
           <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300" id="otterSvg" role="img" aria-label="Lontra adorabile">
            <defs>
              <linearGradient id="furGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" stop-color="#8D6E63"/>
                <stop offset="100%" stop-color="#5D4037"/>
              </linearGradient>
              <linearGradient id="bellyGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" stop-color="#D7CCC8"/>
                <stop offset="100%" stop-color="#BCAAA4"/>
              </linearGradient>
              <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
                <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
                <feOffset dx="2" dy="4" result="offsetblur"/>
                <feComponentTransfer>
                  <feFuncA type="linear" slope="0.3"/>
                </feComponentTransfer>
                <feMerge>
                  <feMergeNode/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
            </defs>

            <g id="otterBodyGroup" filter="url(#softShadow)">
              <!-- Tail -->
              <path id="tail" d="M280,220 Q340,210 360,180 Q340,240 280,250 Z" fill="url(#furGradient)"/>

              <!-- Main Body -->
              <ellipse cx="200" cy="180" rx="90" ry="110" fill="url(#furGradient)"/>
              
              <!-- Belly Patch -->
              <ellipse cx="200" cy="190" rx="60" ry="80" fill="url(#bellyGradient)"/>

              <!-- Feet -->
              <g id="feet">
                <path d="M130,270 Q120,290 140,290 Q160,290 150,270" fill="#5D4037"/>
                <path d="M270,270 Q280,290 260,290 Q240,290 250,270" fill="#5D4037"/>
              </g>

              <!-- Arms -->
              <g id="arms">
                <path d="M120,180 Q100,220 140,220" fill="url(#furGradient)" stroke="#5D4037" stroke-width="1"/>
                <path d="M280,180 Q300,220 260,220" fill="url(#furGradient)" stroke="#5D4037" stroke-width="1"/>
              </g>
                <path id="rightBrow" d="M220,80 Q230,75 240,80" fill="none" stroke="#5D4037" stroke-width="4" stroke-linecap="round" opacity="0.9"/>

                <!-- Nose -->
                <path d="M190,118 Q200,113 210,118 Q200,133 190,118" fill="#3E2723"/>

                <!-- Mouth -->
                <path id="mouth" d="M190,130 Q200,140 210,130" fill="none" stroke="#3E2723" stroke-width="4" stroke-linecap="round"/>

                <!-- Whiskers -->
                <g stroke="#3E2723" stroke-width="1.5" opacity="0.7">
                  <line x1="155" y1="120" x2="125" y2="115"/>
                  <line x1="155" y1="128" x2="125" y2="128"/>
                  <line x1="245" y1="120" x2="275" y2="115"/>
                  <line x1="245" y1="128" x2="275" y2="128"/>
                </g>
                
                <!-- Blush (Hidden by default) -->
                <g id="blush" opacity="0">
                   <circle cx="160" cy="125" r="10" fill="#FFAB91" opacity="0.6"/>
                   <circle cx="240" cy="125" r="10" fill="#FFAB91" opacity="0.6"/>
                </g>
                
                <!-- Food Item (Hidden by default) -->
                <g id="foodItem" opacity="0" transform="translate(180, 140)">
                    <circle r="10" fill="#FF7043" />
                </g>

                <!-- Accessories -->
                <g id="sunglassesItem" opacity="0">
                  <rect x="150" y="85" width="45" height="30" rx="8" fill="#333" stroke="#555" stroke-width="2" opacity="0.9"/>
                  <rect x="205" y="85" width="45" height="30" rx="8" fill="#333" stroke="#555" stroke-width="2" opacity="0.9"/>
                  <line x1="195" y1="100" x2="205" y2="100" stroke="#333" stroke-width="3"/>
                  <line x1="150" y1="100" x2="135" y2="95" stroke="#333" stroke-width="3"/>
                  <line x1="250" y1="100" x2="265" y2="95" stroke="#333" stroke-width="3"/>
                </g>

                <g id="scarfItem" opacity="0">
                   <path d="M150,140 Q200,160 250,140 Q260,155 250,165 Q200,185 150,165 Q140,155 150,140" fill="#EF5350"/>
                   <path d="M170,160 L170,200 L195,200 L195,160" fill="#EF5350"/>
                   <line x1="170" y1="195" x2="195" y2="195" stroke="#B71C1C" stroke-width="2"/>
                </g>
              </g>
            </g>
          </svg>
        </div>
      </div>

      <div class="status-container" id="statusBars">
        <div class="status-item">
          <div class="status-icon">ğŸ—</div>
          <div class="progress-bar"><div id="hungerBar" class="progress-fill" style="width: 100%;"></div></div>
        </div>
        <div class="status-item">
          <div class="status-icon">â¤ï¸</div>
          <div class="progress-bar"><div id="happyBar" class="progress-fill" style="width: 100%;"></div></div>
        </div>
        <div class="status-item">
          <div class="status-icon">âœ¨</div>
          <div class="progress-bar"><div id="cleanBar" class="progress-fill" style="width: 100%;"></div></div>
        </div>
        <div class="status-item">
          <div class="status-icon">âš¡</div>
          <div class="progress-bar"><div id="energyBar" class="progress-fill" style="width: 100%;"></div></div>
        </div>
      </div>

      <div class="actions-grid">
        <button id="feedBtn" class="action-btn">
          <span class="btn-icon">ğŸ—</span>
          <span class="btn-label">Mangia</span>
        </button>
        <button id="playBtn" class="action-btn">
          <span class="btn-icon">ğŸ¾</span>
          <span class="btn-label">Gioca</span>
        </button>
        <button id="bathBtn" class="action-btn">
          <span class="btn-icon">ğŸš¿</span>
          <span class="btn-label">Lava</span>
        </button>
        <button id="sleepBtn" class="action-btn">
          <span class="btn-icon">ğŸ’¤</span>
          <span class="btn-label">Dormi</span>
        </button>
      </div>
    </section>

    <!-- Shop Page -->
    <section id="shopPage" class="page-content hidden">
      <div class="page-header">
        <h2>Negozio</h2>
        <p>Personalizza la tua lontra!</p>
      </div>
      <div class="shop-grid">
        <div class="shop-item">
          <div class="item-preview">ğŸ©</div>
          <div class="item-details">
            <h3>Cappello</h3>
            <span class="price">50 ğŸª™</span>
          </div>
          <button class="buy-btn" data-price="50" data-item="hat">Compra</button>
        </div>
        
        <div class="shop-item">
          <div class="item-preview">ğŸ•¶ï¸</div>
          <div class="item-details">
            <h3>Occhiali</h3>
            <span class="price">120 ğŸª™</span>
          </div>
          <button class="buy-btn" data-price="120" data-item="sunglasses">Compra</button>
        </div>

        <div class="shop-item">
          <div class="item-preview">ğŸ§£</div>
          <div class="item-details">
            <h3>Sciarpa</h3>
            <span class="price">200 ğŸª™</span>
          </div>
          <button class="buy-btn" data-price="200" data-item="scarf">Compra</button>
        </div>
      </div>
    </section>

    <!-- Stats Page -->
    <section id="statsPage" class="page-content hidden">
      <div class="page-header">
        <h2>Statistiche</h2>
      </div>
      <div class="stats-card">
        <div class="stat-row">
          <span>ğŸª™ Monete totali</span>
          <span id="statCoins" class="stat-value">0</span>
        </div>
        <div class="stat-row">
          <span>ğŸ® Partite giocate</span>
          <span id="statGames" class="stat-value">0</span>
        </div>
        <div class="stat-row">
          <span>ğŸŸ Pesci catturati</span>
          <span id="statFish" class="stat-value">0</span>
        </div>
        <div class="stat-row">
          <span>ğŸ© Oggetti acquistati</span>
          <span id="statItems" class="stat-value">0</span>
        </div>
      </div>
      
      <div class="settings-card">
        <h3>Impostazioni</h3>
        <label class="toggle-row">
          <span>Statistiche anonime</span>
          <input type="checkbox" id="analyticsOptInToggle" />
          <span class="toggle-switch"></span>
        </label>
        <p id="analyticsSummary" class="small-text">Statistiche disattivate.</p>
        <button id="resetBtn" class="danger-btn">Reset Gioco</button>
      </div>
    </section>

    <!-- Minigame Overlay -->
    <div id="overlay" class="overlay hidden">
      <div class="minigame-card" id="minigame">
        <div class="minigame-header">
          <h3>Acchiappa i pesci!</h3>
          <span class="timer">10s</span>
        </div>
        <div id="fishArea" class="fish-area"></div>
        <div class="minigame-footer">
          <span class="score">Punti: <span id="miniScore">0</span></span>
          <button id="closeMini" class="secondary-btn">Esci</button>
        </div>
      </div>
    </div>

    <!-- Tutorial Overlay -->
    <div id="tutorialOverlay" class="tutorial-overlay hidden" role="dialog" aria-modal="true">
      <div class="tutorial-card">
        <div class="tutorial-icon">ğŸ¦¦</div>
        <h2>Benvenuto!</h2>
        <p>Prenditi cura della tua nuova amica lontra.</p>
        <div class="tutorial-steps">
          <div class="step"><span>1</span> Nutri e gioca per la felicitÃ </div>
          <div class="step"><span>2</span> Lava e fai dormire per la salute</div>
          <div class="step"><span>3</span> Gioca ai minigiochi per monete</div>
        </div>
        <label class="toggle-row tutorial-toggle">
            <span>Statistiche anonime</span>
            <input type="checkbox" id="analyticsOptInTutorial" />
            <span class="toggle-switch"></span>
        </label>
        <button id="tutorialStart" class="primary-btn full-width">Inizia l'avventura</button>
      </div>
    </div>

    <div id="alertBanner" class="toast hidden"></div>
    
    <div id="updateBanner" class="toast update-toast hidden">
      <span>Nuovo aggiornamento!</span>
      <button id="updateReload" class="small-btn">Aggiorna</button>
      <button id="updateDismiss" class="icon-btn">âœ•</button>
    </div>

  </main>

  <nav class="bottom-nav" id="bottomNav">
    <button class="nav-item active" data-page="home">
      <span class="nav-icon">ğŸ </span>
      <span class="nav-label">Home</span>
    </button>
    <button class="nav-item" data-page="shop">
      <span class="nav-icon">ğŸ›ï¸</span>
      <span class="nav-label">Negozio</span>
    </button>
    <button class="nav-item" data-page="stats">
      <span class="nav-icon">ğŸ“Š</span>
      <span class="nav-label">Stats</span>
    </button>
  </nav>

  <script type="module" src="dist/index.js"></script>
</body>
</html>